# Task 3-8: Add integration tests

## Reference

See `docs/designs/3/tech-design.md` §Integration Tests

## Requirements

Create `tests/tech_writer/test_complexity_integration.py`:

1. **Test real analyzer execution**
   - Skip if analyzer not available
   - Run against small test repo
   - Verify JSON output structure

2. **Test bucket assignment**
   - axios → simple (Total CC ~3,353)
   - fastapi → medium (Total CC ~12,626)
   - react → complex (Total CC ~152,308)

3. **Test budget limits applied**
   - Simple repo → max_sections=10
   - Medium repo → max_sections=25
   - Complex repo → max_sections=50

4. **Test fallback behavior**
   - Mock missing analyzer
   - Verify defaults used

## Test Fixtures

```python
@pytest.fixture
def test_repos():
    return {
        "simple": "https://github.com/axios/axios",
        "medium": "https://github.com/tiangolo/fastapi",
        "complex": "https://github.com/facebook/react",
    }
```

## Testing Approach

- Mark with `@pytest.mark.integration`
- Skip if analyzer not built
- Use cached repos if available

## Acceptance Criteria

- [ ] Tests pass against real repositories
- [ ] Bucket assignments correct
- [ ] Graceful skip when analyzer unavailable
