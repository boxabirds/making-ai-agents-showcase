# Task 3-2: Add unit tests for complexity module

## Reference

See `docs/designs/3/tech-design.md` §Testing

## Requirements

Create `tests/tech_writer/test_complexity.py` with:

1. **TestComplexityBudget**
   - Test dataclass fields
   - Test default values

2. **TestMapComplexityToBudget**
   - Test bucket boundaries (4999 → simple, 5000 → medium)
   - Test budget values per bucket
   - Test top_functions extraction

3. **TestGetAnalyzerPath**
   - Test returns None when not found
   - Test finds binary in PATH (mock)
   - Test finds binary in relative path (mock)

4. **TestAnalyzeComplexity**
   - Test returns None when analyzer missing
   - Test parses valid JSON output
   - Test handles timeout gracefully
   - Test handles invalid JSON gracefully

5. **TestGetComplexityContext**
   - Test includes bucket name
   - Test includes guidance text
   - Test includes hotspot functions

## Testing Approach

Use pytest fixtures and mocks. No real subprocess calls in unit tests.

## Acceptance Criteria

- [ ] All tests pass with `pytest tests/tech_writer/test_complexity.py`
- [ ] No real analyzer execution in unit tests
- [ ] Boundary conditions covered
