# Task 1 â€” SQLite Schema, Lifecycle, Pydantic Models

## Scope
- Define and migrate the SQLite schema (files, chunks, symbols, edges, summaries, claims, report_versions, optional embeddings).
- Configure DB pragmas (WAL, foreign keys, sync level) and lifecycle (temp by default; persisted when `--persist-store` is set).
- Implement Pydantic models mirroring stored entities and tool/LLM IO contracts; enforce validation on ingest and serialization.

## Deliverables
- Schema creation/migration scripts and connection factory honoring lifecycle flags.
- Pydantic models (records + tool/LLM IO) with validators and enums.
- Tests passing for schema constraints, lifecycle, and serialization.

## Test Plan
- Unit: schema creation in temp DB; foreign key and unique constraint enforcement; FTS5 sync triggers.
- Unit: connection pragmas applied; WAL active; foreign_keys ON.
- Unit: lifecycle: default run creates temp DB and deletes on teardown; `--persist-store` skips deletion.
- Unit: Pydantic validation for records and tool/LLM IO; invalid/missing fields rejected; enum enforcement.
- Property: idempotent schema creation (no-op when already created).
- Integration: insert/select round-trip for each entity; cascading deletes; FTS query returns expected rows.
