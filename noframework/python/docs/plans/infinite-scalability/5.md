# Task 5 â€” Report Drafting & Citation Enforcement

## Scope
- Build DSPy `DraftReport` module that consumes prompt + retrieved context (chunks, summaries, graph slices).
- Enforce citation format (`path:line-start-line-end`) and inclusion in claims/paragraphs.
- Ensure output is a single Markdown document (primary artifact).

## Deliverables
- Drafting prompts/templates and DSPy wiring.
- Pydantic validation for draft + extracted claims metadata.

## Test Plan
- Unit: citation parser/validator; rejects malformed or missing citations.
- Integration (stub LLM): draft contains required sections per prompt; citations map to existing chunks/lines.
- Property: drafting respects token/context limits (bounded context injection).
- Error handling: malformed draft output retried; logs capture validation failures.
