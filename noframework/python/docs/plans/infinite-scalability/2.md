# Task 2 â€” Tree-sitter Parsing & Ingestion Pipeline

## Scope
- Implement file discovery (respect .gitignore) and hashing to skip unchanged files.
- Parse code with Tree-sitter per language; extract chunks (with line ranges), symbols, edges (import/call/inherits/uses/exports).
- Chunk docs/non-code by headings/paragraphs; assign kinds.
- Persist parsed artifacts into SQLite via Pydantic-validated records.

## Deliverables
- Parser pipeline module(s) with pluggable language grammars.
- Chunker for docs/text.
- Ingestion flow storing files/chunks/symbols/edges with hashes.

## Test Plan
- Unit: file walker respects .gitignore; hidden files behavior; hash changes detected.
- Unit: per-language parse fixtures -> expected symbols/chunks/edges; line ranges correct.
- Unit: doc chunker splits on headings/paragraphs; preserves order and text.
- Integration: ingest a mixed-language fixture repo; DB contains expected counts and relationships.
- Property: unchanged files skipped on re-run (hash-based); changed files re-parsed.
- Error handling: malformed file handled gracefully (logged, skipped), DB remains consistent.
