# Task 18 â€” Schema/Index Hardening

Status: TODO

## Scope
- Add indexes on symbols (name, kind, file_id), edges (src_symbol_id, dst_symbol_id, edge_type), summaries (target_id, level), and claims (report_version).
- Add FTS on summaries.text and foreign keys from summaries.target_id to files/modules/packages; ensure embeddings tables link to symbols.
- Align schema changes with retrieval and coverage requirements.

## Deliverables
- Migration or schema updates introducing the new indexes, FTS on summaries, and foreign keys.
- Updated store helpers to honor new constraints and query paths.
- Tests confirming indexes exist and FKs enforce referential integrity.

## Test Plan
- Unit: schema creation includes new indexes and summary FTS; FKs enforced for summaries and embeddings.
- Integration: retrieval/query paths leverage new indexes (performance/plan smoke).
- Property: migrations idempotent; FTS triggers maintain summary index on insert/update/delete.
