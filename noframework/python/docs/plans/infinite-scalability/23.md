# Task 23 â€” Retrieval Hybrid Rerank

Status: TODO

## Scope
- Implement hybrid retrieval combining FTS (chunks + summaries) with graph expansion (configurable radius) and optional embeddings, with lexical/graph re-rank.
- Provide structured symbol lookup (exact/regex) and module/package-aware joins; avoid full scans when embeddings are enabled (use ANN or bounded search).
- Expose scoring breakdowns for audit/debug; ensure retrieval outputs are Pydantic-validated.

## Deliverables
- Retrieval engine updates with hybrid rerank, graph radius controls, structured symbol queries, and summary FTS integration.
- Optional ANN-backed embedding search with lexical/graph post-filtering; no hash-only fallbacks.
- Tests/fixtures for rerank behavior, symbol/module queries, and edge-aware expansion.

## Test Plan
- Unit: retrieval returns ranked results combining lexical + graph signals; radius limits applied.
- Unit: summary FTS queries include module/package contexts; symbol regex/exact queries work.
- Unit: embedding search path uses ANN/bounded search without table scans; results re-ranked lexically.
- Integration: audit/debug output shows scoring components; Pydantic validation catches malformed retrieval outputs.
