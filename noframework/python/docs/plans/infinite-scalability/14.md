# Task 14 â€” Retrieval Fidelity

Status: TODO

## Scope
- Add FTS5 on summaries.text for lexical recall beyond chunks.
- Integrate symbols and edges into scoring/ranking to prioritize graph-near results.
- Replace hash-based embeddings with optional real vectors that are always re-ranked by lexical/graph signals.

## Deliverables
- Updated retrieval pipeline combining chunk FTS, summary FTS, symbol/edge expansion, and optional embeddings with re-ranking.
- Schema/index changes to support summary FTS and retrieval-time indices.
- Tests covering hybrid scoring and re-ranking behavior.

## Test Plan
- Unit: summary FTS returns expected rows; symbol/edge expansion adds neighboring chunks/summaries.
- Integration: retrieval over fixture repo ranks graph-proximate chunks higher; embeddings never return results without lexical/graph support.
- Property: re-ranking stable when embeddings absent; bounded result sets respect limits.
