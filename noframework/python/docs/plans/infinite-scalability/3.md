# Task 3 — Summaries Map/Reduce + Validation

## Scope
- Implement chunk→file summarization (LLM via DSPy) with citations and confidence.
- Implement file→module/package rollups (reduce) with aggregation prompts.
- Summary validation: sample summaries against source chunks; check for required symbols/signatures and citation presence.

## Deliverables
- DSPy modules: `SummarizeFile`, `SummarizeModule`, `SummarizePackage`, `SummaryValidator`.
- Persistence of `SummaryRecord`s with confidence and citations.

## Test Plan
- Unit: Pydantic validation of summary outputs (citations required, confidence in range).
- Integration (stub LLM): deterministic summaries generated for fixtures; citations reference existing chunks/lines.
- Validation: sampled summaries compared to source; missing symbols trigger low confidence.
- Property: rollup preserves key items from children (e.g., exported symbols count matches).
- Error handling: malformed LLM output rejected and retried; failure path logged with fallback.
