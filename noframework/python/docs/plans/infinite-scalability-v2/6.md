# Task 6: Symbol Extraction

## Objective
Extract symbols (functions, classes, methods, variables) from parsed AST.

## Dependencies
- Task 5: Tree-sitter parser setup

## Deliverables

`tech_writer/parser.py` (additions):

```python
@dataclass
class Symbol:
    name: str
    kind: str  # "function", "class", "method", "variable"
    line: int
    end_line: int
    signature: str | None = None
    doc: str | None = None
    parent: str | None = None  # For methods: class name

def extract_symbols(content: str, lang: str) -> list[Symbol]:
    """
    Extract all symbols from source code.

    Returns empty list if language not supported.
    """
```

## Acceptance Criteria

- [ ] Extracts functions with name, line range, signature
- [ ] Extracts classes with name, line range
- [ ] Extracts methods with parent class reference
- [ ] Extracts docstrings where present
- [ ] Works for Python
- [ ] Works for JavaScript/TypeScript
- [ ] Returns empty list for unsupported languages

## Language-specific Queries

### Python
```
(function_definition name: (identifier) @name) @func
(class_definition name: (identifier) @name) @class
```

### JavaScript/TypeScript
```
(function_declaration name: (identifier) @name) @func
(class_declaration name: (identifier) @name) @class
(method_definition name: (property_identifier) @name) @method
(arrow_function) @arrow  ; anonymous, skip or use parent
```

## Test Cases (using axios repo)

```gherkin
Feature: Symbol extraction

  Scenario: Extract symbols from JavaScript file
    Given the axios repository is cloned
    When I read and parse "lib/axios.js"
    And I extract symbols
    Then I should find the "Axios" class
    And I should find the "request" method

  Scenario: Extract Python symbols
    Given Python code:
      """
      class Foo:
          def bar(self):
              pass

      def baz():
          pass
      """
    When I extract symbols
    Then I should find:
      | name | kind     | parent |
      | Foo  | class    | None   |
      | bar  | method   | Foo    |
      | baz  | function | None   |

  Scenario: Extract function signatures
    Given JavaScript code "function add(a, b) { return a + b; }"
    When I extract symbols
    Then the "add" function should have signature "function add(a, b)"
```

## Implementation Notes

- Use tree-sitter queries for each language
- Store query patterns as constants per language
- Methods need parent tracking (walk up AST to find class)
