# Task 3: list_files Tool

## Objective
Implement the `list_files` tool for directory exploration.

## Dependencies
- Task 2: SQLite cache store

## Deliverables

`tech_writer/tools/filesystem.py`:

```python
def list_files(
    pattern: str = "*",
    path: str = ".",
    respect_gitignore: bool = True
) -> list[str]:
    """
    List files matching a glob pattern.

    Args:
        pattern: Glob pattern (e.g., "*.py", "src/**/*.ts")
        path: Directory to search in (relative to repo root)
        respect_gitignore: Skip files in .gitignore

    Returns:
        List of file paths relative to repo root
    """
```

## Acceptance Criteria

- [ ] Supports basic glob patterns: `*`, `**`, `?`
- [ ] Supports extension patterns: `*.py`, `*.ts`
- [ ] Supports directory patterns: `src/**/*.py`
- [ ] Respects .gitignore by default
- [ ] Returns paths relative to repo root
- [ ] Handles non-existent directories gracefully (empty list)
- [ ] Handles permission errors gracefully

## Test Cases (using axios repo)

```gherkin
Feature: list_files tool

  Scenario: List all JavaScript files
    Given the axios repository is cloned
    When I call list_files("*.js")
    Then the result should include "index.js"
    And the result should not include any ".ts" files

  Scenario: List files in subdirectory
    Given the axios repository is cloned
    When I call list_files("*.js", path="lib")
    Then all results should start with "lib/"

  Scenario: Recursive glob
    Given the axios repository is cloned
    When I call list_files("**/*.js")
    Then the result should include files from nested directories

  Scenario: Respect gitignore
    Given the axios repository is cloned
    When I call list_files("**/*", respect_gitignore=True)
    Then the result should not include "node_modules" files
```

## Implementation Notes

- Use `pathlib.Path.glob()` for pattern matching
- Use `pathspec` library for .gitignore parsing (already in project)
- Cache .gitignore spec per directory to avoid re-parsing
