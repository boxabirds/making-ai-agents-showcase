# Task 8: Pipeline Orchestration

## Design Reference
- [tech-design.md ยง3.1](../../design/citation-eval/tech-design.md#31-pipeline-stages)

## Objective
Orchestrate the full evaluation pipeline from input to metrics.

## Requirements

### R8.1: Stage Sequencing
Execute stages in order per tech-design.md ยง3.1:
1. Citation extraction
2. Structural validation
3. Claim classification
4. Extractive verification (for extractive claims)
5. Abstractive verification (for abstractive claims)
6. Aggregation

### R8.2: Short-Circuit Options
- `structural_only`: Stop after stage 2
- `skip_llm`: Skip abstractive verification
- `extractive_only`: Skip abstractive even if classified

### R8.3: Progress Reporting
Emit progress events for long-running evaluations

### R8.4: Error Collection
Accumulate errors from all stages; don't fail on first error

## Dependencies
- Task 2: Structural validation
- Task 5: Extractive verification
- Task 6: Abstractive verification

## Test Plan

| Test | Config | Expected |
|------|--------|----------|
| Full pipeline | Default | All stages run |
| Structural only | `structural_only=True` | Stages 1-2 only |
| No LLM | `skip_llm=True` | Stages 1-5 (extractive only) |
| Mixed claims | Default | Both verification methods used |
| All invalid | All citations invalid | Pipeline completes, reports errors |

## Acceptance Criteria
- [ ] All stages from tech-design.md ยง3.1 executed
- [ ] Configuration options work
- [ ] Errors accumulated, not thrown
- [ ] Pipeline returns `EvalResult` per tech-design.md ยง8.6
