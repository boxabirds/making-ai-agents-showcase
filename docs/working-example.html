<!DOCTYPE html>
<html>
<head>
    <title>Working Matrix Viewer Example</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; }
        h1 { text-align: center; }
        
        /* Navigation */
        .nav-buttons { position: fixed; top: 20px; right: 20px; }
        .nav-btn { 
            padding: 10px 20px; 
            margin: 0 5px; 
            cursor: pointer; 
            border: 1px solid #ccc;
            background: white;
            border-radius: 4px;
        }
        .nav-btn.active { background: #007bff; color: white; }
        
        /* Matrix View */
        .matrix-container { 
            background: #f5f5f5; 
            padding: 20px; 
            border-radius: 8px; 
            margin-bottom: 20px;
        }
        
        /* Code Browser */
        .code-browser { 
            display: none;
            grid-template-columns: 1fr 350px 1fr;
            gap: 10px;
            height: 600px;
        }
        .code-browser.active { display: grid; }
        
        .code-panel {
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            display: flex;
            flex-direction: column;
        }
        
        .code-header {
            background: #f0f0f0;
            padding: 10px;
            font-weight: bold;
            border-bottom: 1px solid #ddd;
        }
        
        .code-content {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            background: #f8f8f8;
            font-family: monospace;
            font-size: 13px;
        }
        
        .code-block {
            white-space: pre;
            line-height: 1.4;
        }
        
        .line-number {
            color: #999;
            margin-right: 10px;
            display: inline-block;
            width: 40px;
            text-align: right;
        }
        
        /* Syntax highlighting */
        .token.keyword { color: #0000ff; font-weight: bold; }
        .token.string { color: #a31515; }
        .token.comment { color: #008000; font-style: italic; }
        .token.function { color: #795e26; }
        .token.number { color: #098658; }
        
        /* Comparison list */
        .comparison-list {
            background: #f5f5f5;
            padding: 10px;
            overflow-y: auto;
        }
        
        .comparison-item {
            background: white;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 4px;
            cursor: pointer;
            border: 1px solid #ddd;
        }
        
        .comparison-item:hover {
            background: #e9ecef;
        }
        
        .comparison-summary {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }
        
        .comparison-summary.active { display: block; }
    </style>
</head>
<body>
    <div class="nav-buttons">
        <button class="nav-btn active" onclick="showView('matrix', this)">Matrix View</button>
        <button class="nav-btn" onclick="showView('code', this)">Code Browser</button>
    </div>
    
    <div class="container">
        <h1>Tech Writer Implementation Comparison</h1>
        
        <div id="matrix-view">
            <div class="matrix-container">
                <h2>Select a Comparison</h2>
                <button onclick="loadExample('noframework', 'dspy')">No Framework vs DSPy</button>
                <button onclick="loadExample('noframework', 'atomic-agents')">No Framework vs Atomic Agents</button>
            </div>
            
            <div id="comparison-summary" class="comparison-summary">
                <h2 id="comparison-title"></h2>
                <p id="comparison-text"></p>
                <button onclick="showView('code'); loadCodeView();">View Code Comparison</button>
            </div>
        </div>
        
        <div id="code-browser" class="code-browser">
            <div class="code-panel">
                <div class="code-header" id="code-header-a">Vendor A</div>
                <div class="code-content" id="code-content-a"></div>
            </div>
            
            <div class="comparison-list" id="comparison-list"></div>
            
            <div class="code-panel">
                <div class="code-header" id="code-header-b">Vendor B</div>
                <div class="code-content" id="code-content-b"></div>
            </div>
        </div>
    </div>
    
    <script>
        // Sample data
        const sampleCode = {
            noframework: `from pathlib import Path
import json
import re
from openai import OpenAI

class TechWriterReActAgent:
    def __init__(self, model_name="openai/gpt-4.1-mini"):
        """Initialize the agent with the specified model."""
        self.model_name = model_name
        self.memory = []
        self.final_answer = None`,
            
            dspy: `import dspy
from common.utils import (
    get_command_line_args,
    read_prompt_file,
)

class TechWriterSignature(dspy.Signature):
    """Tech writer that analyzes codebases."""
    
    prompt: str = dspy.InputField()
    analysis: str = dspy.OutputField()`,
    
            'atomic-agents': `import sys
import instructor
from atomic_agents.agents.base_agent import BaseAgent

class TechWriterAgent:
    def __init__(self, vendor_model: str = "openai/gpt-4o-mini"):
        """Initialize the TechWriter agent."""
        self.tools = []`
        };
        
        let currentComparison = null;
        
        function showView(view, btn) {
            // Update nav buttons
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            if (btn) btn.classList.add('active');
            
            // Show/hide views
            if (view === 'matrix') {
                document.getElementById('matrix-view').style.display = 'block';
                document.getElementById('code-browser').classList.remove('active');
            } else {
                document.getElementById('matrix-view').style.display = 'none';
                document.getElementById('code-browser').classList.add('active');
            }
        }
        
        function loadExample(vendorA, vendorB) {
            currentComparison = { vendor_a: vendorA, vendor_b: vendorB };
            
            // Show summary
            document.getElementById('comparison-title').textContent = `${vendorA} vs ${vendorB}`;
            document.getElementById('comparison-text').textContent = 
                `Comparing ${vendorA} implementation with ${vendorB} implementation. ` +
                `Click "View Code Comparison" to see the code side by side.`;
            document.getElementById('comparison-summary').classList.add('active');
        }
        
        function loadCodeView() {
            if (!currentComparison) return;
            
            // Set headers
            document.getElementById('code-header-a').textContent = currentComparison.vendor_a;
            document.getElementById('code-header-b').textContent = currentComparison.vendor_b;
            
            // Load code
            const codeA = sampleCode[currentComparison.vendor_a];
            const codeB = sampleCode[currentComparison.vendor_b];
            
            if (codeA) renderCode('code-content-a', codeA);
            if (codeB) renderCode('code-content-b', codeB);
            
            // Add sample comparisons
            document.getElementById('comparison-list').innerHTML = `
                <div class="comparison-item">
                    <strong>Class Definition</strong><br>
                    <small>${currentComparison.vendor_a}: lines 6-11<br>
                    ${currentComparison.vendor_b}: lines 4-8</small>
                </div>
                <div class="comparison-item">
                    <strong>Initialization</strong><br>
                    <small>Different approaches to agent setup</small>
                </div>
            `;
        }
        
        function renderCode(elementId, code) {
            const element = document.getElementById(elementId);
            const lines = code.split('\n');
            
            element.innerHTML = lines.map((line, index) => {
                const lineNum = index + 1;
                const highlighted = highlightPython(line);
                return `<div class="code-block"><span class="line-number">${lineNum}</span>${highlighted}</div>`;
            }).join('');
        }
        
        function highlightPython(line) {
            if (!line) return '';
            
            // Escape HTML
            let text = line.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
            
            // Simple highlighting
            text = text.replace(/\b(class|def|import|from|return|if|else|for|while)\b/g, '<span class="token keyword">$1</span>');
            text = text.replace(/(["'])(.*?)\1/g, '<span class="token string">$1$2$1</span>');
            text = text.replace(/(#.*)$/g, '<span class="token comment">$1</span>');
            text = text.replace(/\b(\d+)\b/g, '<span class="token number">$1</span>');
            
            return text;
        }
        
        // Test initialization
        console.log('Working example loaded successfully');
    </script>
</body>
</html>